"use strict";(self.webpackChunkcachelib=self.webpackChunkcachelib||[]).push([[2892],{15680:(e,n,a)=>{a.r(n),a.d(n,{MDXContext:()=>h,MDXProvider:()=>u,mdx:()=>b,useMDXComponents:()=>l,withMDXComponents:()=>d});var r=a(96540);function t(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function c(){return c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c.apply(this,arguments)}function o(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?o(Object(a),!0).forEach((function(n){t(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,r,t=function(e,n){if(null==e)return{};var a,r,t={},c=Object.keys(e);for(r=0;r<c.length;r++)a=c[r],n.indexOf(a)>=0||(t[a]=e[a]);return t}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)a=c[r],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}var h=r.createContext({}),d=function(e){return function(n){var a=l(n.components);return r.createElement(e,c({},n,{components:a}))}},l=function(e){var n=r.useContext(h),a=n;return e&&(a="function"==typeof e?e(n):i(i({},n),e)),a},u=function(e){var n=l(e.components);return r.createElement(h.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var a=e.components,t=e.mdxType,c=e.originalType,o=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),d=l(a),u=t,m=d["".concat(o,".").concat(u)]||d[u]||p[u]||c;return a?r.createElement(m,i(i({ref:n},h),{},{components:a})):r.createElement(m,i({ref:n},h))}));function b(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var c=a.length,o=new Array(c);o[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:t,o[1]=i;for(var h=2;h<c;h++)o[h]=a[h];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},88791:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>h,toc:()=>l});var r=a(9668),t=a(21367),c=(a(96540),a(15680)),o=["components"],i={id:"Cachebench_Overview",title:"Overview"},s=void 0,h={unversionedId:"Cache_Library_User_Guides/Cachebench_Overview",id:"Cache_Library_User_Guides/Cachebench_Overview",title:"Overview",description:"CacheBench is a benchmark and stress testing  tool to evaluate cache",source:"@site/docs/Cache_Library_User_Guides/Cachebench_Overview.md",sourceDirName:"Cache_Library_User_Guides",slug:"/Cache_Library_User_Guides/Cachebench_Overview",permalink:"/docs/Cache_Library_User_Guides/Cachebench_Overview",draft:!1,editUrl:"https://github.com/facebook/CacheLib/edit/main/website/docs/Cache_Library_User_Guides/Cachebench_Overview.md",tags:[],version:"current",frontMatter:{id:"Cachebench_Overview",title:"Overview"},sidebar:"cachebenchSideBar",next:{title:"Configuring cachebench parameters",permalink:"/docs/Cache_Library_User_Guides/Configuring_cachebench_parameters"}},d={},l=[{value:"Uses of cachebench",id:"uses-of-cachebench",level:2},{value:"Building  cachebench",id:"building--cachebench",level:2}],u={toc:l};function p(e){var n=e.components,i=(0,t.A)(e,o);return(0,c.mdx)("wrapper",(0,r.A)({},u,i,{components:n,mdxType:"MDXLayout"}),(0,c.mdx)("p",null,"CacheBench is a benchmark and stress testing  tool to evaluate cache\nperformance with real hardware and real cache workloads. CacheBench takes in a\nconfiguration that describes the cache workload  and the cache configuration\nand simulates  the cache behavior by instantiating a CacheLib cache. It runs\nthe workload and emits  results periodically and at the end. The results\ninclude metrics such as hit rate, evictions, write rate to flash cache,\nlatency, etc. The workload configs can be hand-written by a human, produced by\na workload analyzer, or backed by raw production cachelib traces. The main\ncustomization points into CacheBench are through writing workload configs or\ncustom workload generators. See ",(0,c.mdx)("a",{parentName:"p",href:"Configuring_cachebench_parameters"},"configuring\ncachebench")," for more details."),(0,c.mdx)("p",null,(0,c.mdx)("img",{src:a(73152).A,width:"1148",height:"391"})),(0,c.mdx)("h2",{id:"uses-of-cachebench"},"Uses of cachebench"),(0,c.mdx)("p",null,"CacheBench can be configured and used for several purposes depending on the\ndeveloper's need. The following are few examples."),(0,c.mdx)("ol",null,(0,c.mdx)("li",{parentName:"ol"},(0,c.mdx)("p",{parentName:"li"},(0,c.mdx)("strong",{parentName:"p"},"Prototype and evaluation of cache heuristics"),": CacheBench can be used to compare the cache\nperformance (hit ratio) of various configuration options for existing\nhueristics and new heuristics. For example, given a cache size and\nworkload, comparing LRU vs 2Q vs FIFO vs new heuristic added to CacheLib.")),(0,c.mdx)("li",{parentName:"ol"},(0,c.mdx)("p",{parentName:"li"},(0,c.mdx)("strong",{parentName:"p"},"Evaluating throughput and scalability"),": By representing the workload in\nCacheBench, you can compare the throughput of various cache setups and\nCacheLib configuration. For example, given a workload, identifying the\nmaximum throughput of dram cache and hybrid cache setups as you scale up\nnumber of application threads or modify CacheLib configuration.")),(0,c.mdx)("li",{parentName:"ol"},(0,c.mdx)("p",{parentName:"li"},(0,c.mdx)("strong",{parentName:"p"},"Evaluate hardware choices"),": CacheBench workloads can be evaluated on various\nhardware choices to compare the trade-offs between them. For example\nCacheBench can replay the workload against a 100GB dram cache and a 10GB\ndram + 90 GB SSD cache to compare the sensitivity of application\nperformance and hardware\nperformance.")),(0,c.mdx)("li",{parentName:"ol"},(0,c.mdx)("p",{parentName:"li"},(0,c.mdx)("strong",{parentName:"p"},"Testing for correctness and crashes"),": When adding new features to\nCacheLib, in addition to unit tests, CacheBench is leveraged to stress test\nthe feature's correctness in a concurrent multi-threaded environment.\nCacheBench provides options to ensure the consistency of the cache by\nvalidating the data correctness of the operations. See ",(0,c.mdx)("a",{parentName:"p",href:"Configuring_cachebench_parameters#consistency-checking"},"configuring\nconsistency\nchecking")," on how\nthis can be enabled. All code changes and new features to CacheLib from\nFacebook go through correctness stress tests with CacheBench."))),(0,c.mdx)("h2",{id:"building--cachebench"},"Building  cachebench"),(0,c.mdx)("p",null,"Follow instructions in ",(0,c.mdx)("a",{parentName:"p",href:"/docs/installation"},"Installation")," to build\ncachebench. This should install cachebench in your local machine under\n",(0,c.mdx)("inlineCode",{parentName:"p"},"opt/cachelib/bin/cachebench")))}p.isMDXComponent=!0},73152:(e,n,a)=>{a.d(n,{A:()=>r});const r=a.p+"assets/images/cachebench-25d1d476ed27af8ec3a0b5033571dd1a.png"}}]);